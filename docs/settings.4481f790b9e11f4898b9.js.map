{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/TrelloConstants.js","webpack:///./src/storage/BoardStorage.js","webpack:///./src/storage/CardStorage.js","webpack:///./src/storage/Storage.js","webpack:///./src/Debug.js","webpack:///./src/LeanCoffeeSettings.js","webpack:///./src/settings.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","StorageScope","StorageVisibility","BadgeColors","BOARD","CARD","MEMBER","ORGANIZATION","SHARED","PRIVATE","BLUE","GREEN","ORANGE","RED","YELLOW","PURPLE","PINK","SKY","LIME","LIGHTGRAY","BoardStorage","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","Storage","read","DISCUSSION_STATUS","DISCUSSION_CARD_ID","DISCUSSION_STARTED_AT","DISCUSSION_PREVIOUS_ELAPSED","DISCUSSION_INTERVAL_ID","CardStorage","DISCUSSION_ELAPSED","DISCUSSION_THUMBS","newStatus","write","newElapsed","newThumbs","newVotes","VOTES","delete","scope","arguments","length","undefined","visibility","assign","cardId","set","entries","remove","Debug","Promise","boardData","getAll","cards","console","groupCollapsed","log","JSON","stringify","getContext","groupEnd","map","card","id","then","cardsData","forEach","cardStorage","boardStorage","deleteMultiple","all","_ref","_asyncToGenerator","deleteMultipleById","_x7","apply","LeanCoffeeSettings","window","environment","_this","LeanCoffeeSettings_classCallCheck","_defineProperty","LeanCoffeeSettings_asyncToGenerator","isProduction","showData","wipeData","w","TrelloPowerUp","iframe","document","querySelector","style","display","sizeTo","settingsInstance","process","init"],"mappings":"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","file":"settings.4481f790b9e11f4898b9.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"bd5530b150283a4b1bad\");\n","export const VisibilityConditions = {\n  IS_ADMIN: 'admin',\n  CAN_EDIT: 'edit',\n  READ_ONLY: 'readOnly',\n  SIGNED_IN: 'signedIn',\n  SIGNED_OUT: 'signedOut',\n  ALWAYS: 'always'\n};\n\nexport const StorageScope = {\n  BOARD: 'board',\n  CARD: 'card',\n  MEMBER: 'member',\n  ORGANIZATION: 'organization'\n};\n\nexport const StorageVisibility = {\n  SHARED: 'shared',\n  PRIVATE: 'private'\n};\n\nexport const BadgeColors = {\n  BLUE: 'blue',\n  GREEN: 'green',\n  ORANGE: 'orange',\n  RED: 'red',\n  YELLOW: 'yellow',\n  PURPLE: 'purple',\n  PINK: 'pink',\n  SKY: 'sky',\n  LIME: 'lime',\n  LIGHTGRAY: 'light-gray'\n};\n","import { StorageScope, StorageVisibility } from '../TrelloConstants';\nimport Storage from './Storage';\n\nclass BoardStorage extends Storage {\n    static DISCUSSION_STATUS = 'leancoffeeDiscussionStatus';\n\n    static DISCUSSION_CARD_ID = 'leancoffeeDiscussionCardId';\n\n    static DISCUSSION_STARTED_AT = 'leancoffeeDiscussionStartedAt';\n\n    static DISCUSSION_PREVIOUS_ELAPSED = 'leancoffeeDiscussionPreviousElapsed';\n\n    static DISCUSSION_INTERVAL_ID = 'leancoffeeDiscussionIntervalId';\n\n    constructor() {\n      super(StorageScope.BOARD, StorageVisibility.SHARED);\n    }\n\n    getDiscussionStatus(t) {\n      return this.read(t, BoardStorage.DISCUSSION_STATUS);\n    }\n\n    getDiscussionCardId(t) {\n      return this.read(t, BoardStorage.DISCUSSION_CARD_ID);\n    }\n\n    getDiscussionStartedAt(t) {\n      return this.read(t, BoardStorage.DISCUSSION_STARTED_AT);\n    }\n\n    getDiscussionPreviousElapsed(t) {\n      return this.read(t, BoardStorage.DISCUSSION_PREVIOUS_ELAPSED);\n    }\n\n    getDiscussionIntervalId(t) {\n      return this.read(t, BoardStorage.DISCUSSION_INTERVAL_ID);\n    }\n}\n\nexport default BoardStorage;\n","import { StorageScope, StorageVisibility } from '../TrelloConstants';\nimport Storage from './Storage';\n\nclass CardStorage extends Storage {\n  static DISCUSSION_STATUS = 'leancoffeeDiscussionStatus';\n\n  static DISCUSSION_ELAPSED = 'leancoffeeDiscussionElapsed';\n\n  static DISCUSSION_THUMBS = 'leancoffeeDiscussionThumbs';\n\n  static VOTES = 'leancoffeeVotes';\n\n  constructor() {\n    super(StorageScope.CARD, StorageVisibility.SHARED);\n  }\n\n  getDiscussionStatus(t) {\n    return this.read(t, CardStorage.DISCUSSION_STATUS);\n  }\n\n  getDiscussionElapsed(t) {\n    return this.read(t, CardStorage.DISCUSSION_ELAPSED);\n  }\n\n  getDiscussionThumbs(t) {\n    return this.read(t, CardStorage.DISCUSSION_THUMBS);\n  }\n\n  saveDiscussionStatus(t, newStatus) {\n    return this.write(t, CardStorage.DISCUSSION_STATUS, newStatus);\n  }\n\n  saveDiscussionElapsed(t, newElapsed) {\n    return this.write(t, CardStorage.DISCUSSION_ELAPSED, newElapsed);\n  }\n\n  saveDiscussionThumbs(t, newThumbs) {\n    return this.write(t, CardStorage.DISCUSSION_THUMBS, newThumbs);\n  }\n\n  saveVotes(t, newVotes) {\n    return this.write(t, CardStorage.VOTES, newVotes);\n  }\n\n  deleteDiscussionThumbs(t) {\n    return this.delete(t, CardStorage.DISCUSSION_THUMBS);\n  }\n}\n\nexport default CardStorage;\n","import { StorageScope, StorageVisibility } from '../TrelloConstants';\n\nclass Storage {\n  constructor(scope = StorageScope.MEMBER, visibility = StorageVisibility.PRIVATE) {\n    Object.assign(this, { scope, visibility });\n  }\n\n  readById(t, key, cardId) {\n    return t.get(cardId, this.visibility, key);\n  }\n\n  read(t, key) {\n    return t.get(this.scope, this.visibility, key);\n  }\n\n  write(t, key, value) {\n    return t.set(this.scope, this.visibility, key, value);\n  }\n\n  writeMultiple(t, entries) {\n    return t.set(this.scope, this.visibility, entries);\n  }\n\n  delete(t, key) {\n    return t.remove(this.scope, this.visibility, key);\n  }\n\n  deleteMultiple(t, entries) {\n    return t.remove(this.scope, this.visibility, entries);\n  }\n\n  deleteMultipleById(t, entries, cardId) {\n    return t.remove(cardId, this.visibility, entries);\n  }\n}\n\nexport default Storage;\n","import { StorageVisibility } from './TrelloConstants';\nimport BoardStorage from './storage/BoardStorage';\nimport CardStorage from './storage/CardStorage';\n\n/* eslint-disable no-console */\nclass Debug {\n  static async showData(t, Promise) {\n    const boardData = await t.getAll();\n    const cards = await t.cards('all');\n\n    console.groupCollapsed('Current context');\n    console.log(JSON.stringify(t.getContext(), null, 2));\n    console.groupEnd();\n\n    console.groupCollapsed('Board data');\n    console.log(JSON.stringify(boardData, null, 2));\n    console.groupEnd();\n\n    const cardsPromises = Promise.map(cards, card => t.get(card.id, StorageVisibility.SHARED));\n\n    cardsPromises.then(cardsData => cardsData.forEach((card) => {\n      console.groupCollapsed('Card data');\n      console.log(JSON.stringify(card, null, 2));\n      console.groupEnd();\n    }));\n  }\n\n  static async wipeData(t, Promise, cardStorage, boardStorage) {\n    boardStorage.deleteMultiple(t, [\n      BoardStorage.DISCUSSION_STATUS,\n      BoardStorage.DISCUSSION_CARD_ID,\n      BoardStorage.DISCUSSION_STARTED_AT,\n      BoardStorage.DISCUSSION_PREVIOUS_ELAPSED,\n      BoardStorage.DISCUSSION_INTERVAL_ID\n    ]);\n\n    const cards = await t.cards('all');\n\n    Promise.all(cards.map(async (card) => {\n      await cardStorage.deleteMultipleById(t, [\n        CardStorage.DISCUSSION_STATUS,\n        CardStorage.DISCUSSION_ELAPSED,\n        CardStorage.DISCUSSION_THUMBS,\n        CardStorage.VOTES\n      ], card.id);\n    })).then(() => {\n      console.log('Data wipe finished');\n    });\n  }\n}\n\nexport default Debug;\n","import BoardStorage from './storage/BoardStorage';\nimport CardStorage from './storage/CardStorage';\nimport Debug from './Debug';\n\n\nclass LeanCoffeeSettings {\n  constructor(window, environment) {\n    this.w = window;\n    this.t = window.TrelloPowerUp.iframe();\n    this.Promise = window.TrelloPowerUp.Promise;\n    this.isProduction = environment === 'production';\n    this.boardStorage = new BoardStorage();\n    this.cardStorage = new CardStorage();\n  }\n\n  init() {\n    if (!this.isProduction) {\n      this.w.document.querySelector('.dev-only').style.display = 'block';\n    }\n\n    this.t.sizeTo('#leanCoffeeSettingsForm');\n  }\n\n  showData = async () => {\n    if (this.isProduction) { return; }\n\n    Debug.showData(this.t, this.Promise);\n  };\n\n  wipeData = async () => {\n    if (this.isProduction) { return; }\n\n    Debug.wipeData(this.t, this.Promise, this.cardStorage, this.boardStorage);\n  };\n}\n\nexport default LeanCoffeeSettings;\n","import LeanCoffeeSettings from './LeanCoffeeSettings';\n\nwindow.settingsInstance = new LeanCoffeeSettings(window, process.env.NODE_ENV);\nwindow.settingsInstance.init();\n"],"sourceRoot":""}